<!DOCTYPE html>
<html>
<head>
	<title>Test IT</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--Favicon-->
	<link rel="icon" href="img/favicon-16x16.png">

	<!--Styles-->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<!--Custom style link-->
	<link rel="stylesheet" href="css/custom.css">
	<link rel="stylesheet" href="css/jquery.toast.min.css">
	<style>
		.bucketcheck label {
			    padding-left: 5px;
                margin-bottom: 15px;
		}

		.submodeldiv {
			background-color: #f7f9fa;
		}
	</style>
</head>
<body>
	<!--Header Start-->
	<header class="navbar navbar-expand-lg">
		<!--Logo Start-->
		<a id="logo" class="navbar-brand text-center" href="#">
			<img src="img/4317-converted.png">
		</a>
		<!--Logo End-->
		<!--Navbar Toggle Start-->
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
			<span class="fa fa-bars"></span>
		</button>
		<!--Navbar Toggle End-->
		<div class="collapse navbar-collapse" id="navbarText">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item"><a class="nav-link" href="dashboard.html"><img src="img/insert-chart-outlined-24-px.png"> Monitor App</a></li>
				<li class="nav-item"><a class="nav-link" href="users.html"><img src="img/person-outline-24-px-1.png"> Subscribers</a></li>
				<li class="nav-item"><a class="nav-link" href="setup.html"><img src="img/settings-24-px.png"> AppSettings</a></li>
				<li class="nav-item"><a class="nav-link" href="testmanagement.html"><img src="img/assignment-24-px.png">  Library </a></li>
				<li class="nav-item"><a class="nav-link" href="runtest.html"><img src="img/play-arrow-24-px.png"> Execute Test Plan</a></li>
				<li class="nav-item"><a class="nav-link" href="testbucketenviroment.html"><img src="img/subtitles-24-px.png"> Logical Group</a></li>
				<li class="nav-item active"><a class="nav-link" href="reports.html"><img src="img/pie-chart-24-px.png"> Reports</a></li>
				<!-- <li class="nav-item"><a class="nav-link" href="subscription.html">Subscriptions</a></li> -->
			</ul>

			<!--User Menu Start-->
				<div id="userMenu" class="dropdown">
					<!-- <a href="#"><i class="fa fa-user-o"></i> User</a> -->
					<a href="#" class="dropdown-toggle" data-toggle="dropdown"><img   style="width: 25px; height: 25px; border-radius: 50%;"   src="img/account-circle-24-px.png"> <span>User</span></a>
					<div class="dropdown-menu">
				      <a class="dropdown-item" href="profileUser.html">Profile</a>
				      <a class="dropdown-item" href="login.html">Logout</a>
				    </div>
				</div>
			<!--User Menu End-->
		</div>
	</header>
	<!--Header End-->

	<!--Sidebar Start-->
	<aside class="sidebar pull-left">
		<ul>
			<!-- <li><a href="#"><img src="img/add-24-px.png"></a></li>
			<li><a href="#"><i class="fa fa-plus"></i></a></li> -->
			<li><a href="#"><img src="img/apps-24-px.png"></a></li>
			<li><a href="#"><img src="img/add-24-px.png"></a></li>
		</ul>
	</aside>
	<!--Sidebar End-->

	<!--Main Contebt Start-->
	<div id="main-content" class="container-fluid pull-right">
		<!--Page Title-->
		<!-- <h1 id="page-title">Reports</h1> -->
        
        <!--for Table-->
		<div class="card">
			<div class="card-body">
				<form>
					<div class="row">
						<div class="col-md-12 col-sm-12 col-xs-12 mb-2 buttonlink">
							<!--Page subtitle-->
							<label class="subtitle">Execution Reports</label>
							<!--Delete row-->
							<button class="btn btn-primary float-right buttonlink" id="deleteRow"><img src="img/delete-24-px.png">DELETE</button>
						</div>
					</div>
					<div class="row selectdiv reporttableParent" style="overflow-x: auto;">
						<table id="bucketList" class="table selectdiv1 reporttable">
						  <thead>
						    <tr>
						      <th scope="col" class="bucketcheck">
						      	<label class="main mainCB">
							        <input type="checkbox"> 
							        <span class="geekmark"></span> 
							    </label>
					          </th>
					          <th scope="col"></th>
						      <th scope="col">RUN NAME <i class="fa fa-angle-down" aria-hidden="true"></i>  <img src="img/search-24-px.png" alt="Imgsearch" class="searchtext"></th>
						      <th scope="col">EXECUTED BY <img src="img/search-24-px.png" alt="Imgsearch" class="searchtext"></th>
						      <th scope="col">EXECUTION PROGRESS</th>
						      <th scope="col">ACTIONS</th>
						    </tr>
						  </thead>
						  <tbody>
						  	<tr style="display: none;">
							<td></td>
							<td></td>
							<td><input type="text" id="f1" class="form-control border" name="" placeholder="Search Run Test name"></td>
							<td><input type="text" id="f2" class="form-control border" name="" placeholder="Search Role name"></td>
							<td></td>
							<td></td>
							</tr>
						  </tbody>
						</table>
					</div>
				</form>
			</div>
		</div>

		<!-- The Modal 1-->
			<!-- The Modal 1-->
			<div class="modal fade model1" id="myModal">
				<div class="modal-dialog model_dialog">
				  <div class="modal-content">
				  
					<!-- Modal Header -->
					<div class="modal-header">
					  <h5 class="modal-title"></h5>
					  <button type="button" class="close" data-dismiss="modal">&times;</button>
					</div>
					
					<!-- Modal body -->
					<div class="modal-body" id="downloadPDFBody">
					  <div class="row">
						  <div class="col-md-12">
							  <div class="row">
								  <div class="col-md-6 textrow">
									  <p id="selectedExecutionName"><strong>Execution Result : cbowenahs_12_27_2018_12_43_43</strong></p>
								  </div>
								  <div class="col-md-6 textrow">
									  <canvas id="pie-chart" style="display: inline-block; float: left !important;"></canvas>
									  <table class="tablespace">
										  <thead>
											  <tr>
												  <th>TOTAL</th>
												  <th>PASSED</th>
												  <th>FAILED</th>
												  <th>QUEUED</th>
											  </tr>
										  </thead>
										  <tbody>
											  <tr>
												  <td id="totalExecution">102</td>
												  <td id="passedExecution">52</td>
												  <td id="failedExecution">30</td>
												  <td id="queuesExecution">20</td>
											  </tr>
										  </tbody>
									  </table>
								  </div>
							  </div>
							  <div class="Reportmodel selectedExecutionModel" style="overflow-x: auto;">
								  <table class="table mb-0 reportmodeltable">
								  <thead>
									<tr>
									  <th scope="col">SR. NO.</th>
									  <th scope="col">LOGICAL GROUP NAME</th>
									  <th scope="col">RESULT</th>
									  <th scope="col">ELAPSE TIME</th>
									  <!-- <th scope="col">ACTION</th> -->
									</tr>
								  </thead>
								  <tbody>
								  </tbody>
								</table>
							  </div>
						  </div>
					  </div>
					</div>
					
					<!-- Modal footer -->
					<div class="modal-footer btnfooter">
						<button type="button" class="btn btn-dark" data-dismiss="modal">CLOSE</button>
					</div>
					
				  </div>
				</div>
			  </div>
			  <!-- End of Modal 1-->


		  <!-- The Modal 1-->
		  <div class="modal fade model1" id="myModal1">
		    <div class="modal-dialog model_dialog">
		      <div class="modal-content">
		      
		        <!-- Modal Header -->
		        <div class="modal-header">
		          <h5 class="modal-title"></h5>
		          <button type="button" class="close" data-dismiss="modal">&times;</button>
		        </div>
		        
		        <!-- Modal body -->
		        <div class="modal-body failed_model">
		          <div class="row">
		          	<div class="model-form-data col-xl-5 col-lg-6 col-md-8 col-sm-10 mx-auto text-center failedmodel_subdiv">
                      <p><img src="img/logo1.png">bmc <span>helix</span></p>
                      <p>Remedy Single Sign-On</p>
                        <form action="" class="justify-content-center">
	                        <div class="form-group inputIcon">
	                            <i class="fa fa-user"></i> <input type="text" class="form-control" value="Test_Auromation1">
	                        </div>
	                        <div class="form-group inputIcon">
	                            <i class="fa fa-lock"></i> <input type="password" class="form-control" placeholder="Password"> <span id="showPWD">Show</span>
	                        </div>
	                        	<button type="submit" class="form-control btn btn-danger mb-4 btn-size"><i class="fa fa-exclamation-triangle"></i>  <span>Incorrect username or password</span></button>
	                            <button type="submit" class="form-control btn btn-success mb-4 btn-size"><span>Log In</span></button>
	                    </form>
		          	</div>
		          </div>
		          <div class="row model-bottomsection">
		          	<div class="col-md-10">
		          		Â© Copyright 1997 -2019 BMC Software, Inc.<br> All Right Reserved BMC, BMC Software, the BMC logo and the BMC Software logo are the exclusive properties of BMC Software, inc are registered with<br> the U.S. Patent and Trademark Office, and may be registered or pending registration in other countries.
		          	</div>
		          	<div class="col-md-2 model-rightbox">
		          		<img src="img/bmchelixlogo">
		          	</div>
		          </div>
		        </div>
		        
		        <!-- Modal footer -->
		        <div class="modal-footer btnfooter">
		        	<button type="button" class="btn btn-dark" data-dismiss="modal">CLOSE</button>
		        </div>
		        
		      </div>
		    </div>
		  </div>
		  <!-- End of Modal 1-->

		   <!-- The Modal 2-->
				<div class="modal fade model1" id="myModal2">
				    <div class="modal-dialog">
				      <div class="modal-content">
				      
				        <!-- Modal Header -->
				        <div class="modal-header">
				          <button type="button" class="close" data-dismiss="modal">&times;</button>
				        </div>
				        
				        <!-- Modal body -->
				        <div class="modal-body model_body">
				          	 <h4>Delete Executions</h4>
				             <p>Do you want to Delete Executions?</p>
				             <p id="deletedItem"></p>
				        </div>
				        
				        <!-- Modal footer -->
				        <div class="modal-footer btnfooter">
				        	<button type="button" class="btn btn-dark" data-dismiss="modal">NO</button>
				        	<button type="button" id="yesbtn" class="btn btn-primary" data-toggle="modal" data-dismiss="modal" >YES</button>
				        </div>
						        
				      </div>
				    </div>
				</div>
				<!-- End of Modal 2-->

				  <!-- The Modal 2-->
				  <div class="modal fade model1" id="forcedFailedModal">
				    <div class="modal-dialog">
				      <div class="modal-content">
				      
				        <!-- Modal Header -->
				        <div class="modal-header">
				          <button type="button" class="close" data-dismiss="modal">&times;</button>
				        </div>
				        
				        <!-- Modal body -->
				        <div class="modal-body model_body">
				          	 <h4>Mark Execution Forced Failed</h4>
				             <p>Do you want to mark execution forced failed?</p>
				             <p id="deletedItem"></p>
				        </div>
				        
				        <!-- Modal footer -->
				        <div class="modal-footer btnfooter">
				        	<button type="button" class="btn btn-dark" data-dismiss="modal">NO</button>
				        	<button type="button" id="forcedFailedModalyesbtn" class="btn btn-primary" data-toggle="modal" data-dismiss="modal" >YES</button>
				        </div>
						        
				      </div>
				    </div>
				</div>
				<!-- End of Modal 2-->


				
				  <!-- The Modal 3-->
				  <div class="modal fade model1" id="retryModal">
				    <div class="modal-dialog">
				      <div class="modal-content">
				      
				        <!-- Modal Header -->
				        <div class="modal-header">
				          <button type="button" class="close" data-dismiss="modal">&times;</button>
				        </div>
				        
				        <!-- Modal body -->
				        <div class="modal-body model_body">
				          	 <h4>Mark Testcases Retry</h4>
				             <p>Do you want to retry testcases?</p>
				             <p id="deletedItem"></p>
				        </div>
				        
				        <!-- Modal footer -->
				        <div class="modal-footer btnfooter">
				        	<button type="button" class="btn btn-dark" data-dismiss="modal">NO</button>
				        	<button type="button" id="retryModalyesbtn" class="btn btn-primary" data-toggle="modal" data-dismiss="modal" >YES</button>
				        </div>
						        
				      </div>
				    </div>
				</div>
				<!-- End of Modal 2-->

	</div>
	<!--Main Content End-->

	<!--Footer Start-->
	<footer id="footer" class="container-fluid pull-right">
		<div class="pull-left footer-logo"><img src="img/logo-11.png"></div>
		<div class="pull-right footer-text">
			<!-- &copy <script>document.write((new Date()).getFullYear());</script>   -->
			Copyright @ 2021 Test IT. All Rights Reserved.
		</div>
	</footer>
    <!--Footer End-->
	<!-- For sidebar toggle -->
	<a href="#" id="sidebarToggle"><i class="fa fa-caret-right fa-2x" aria-hidden="true"></i></a>

	<!--Scripts-->
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/moment.js"></script>	
	<script src="js/custom.js"></script>
	<script src="js/pages/reports.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
	<script src="js/Libraries/jquery.dataTables.js"></script>
	<script src="js/Libraries/dataTables.fixedHeader.js"></script>
	<script src="js/Libraries/dataTables.tableTools.js"></script>
	<script src="js/Libraries/jquery.dataTables.bootstrap.js"></script>
	<script src="js/Libraries/jquery.nanoscroller.min.js"></script>
	<script src="js/Libraries/jquery.toast.min.js"></script>
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
	<script type="text/javascript" src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>



	<script>
		new Chart(document.getElementById("pie-chart"), {
		    type: 'pie',
		    data: {
		      // labels: ["TOTAL", "PASSED", "FAILED", "QUEQUD"],
		      datasets: [{
		        // label: "Population (millions)",
		        backgroundColor: ["#2e8009", "#dbaf11","#bb2424"],
		        data: [50,20,30]
		      }]
		    }
		});
	</script>
	<script>

$(document).ready(function() {	
google.charts.load("current", {packages:["corechart"]});
var uname = readCookie("TAuname");
$("#userMenu span").text(uname);
if(localStorage.getItem('profileImage')!='null')
$("#userMenu img").attr("src",localStorage.getItem('profileImage'));
fetchAllExecutions();
});


		$(function(){
			/*---Jquery for search table column---*/

			$(".searchtext").click(function(e){
				e.preventDefault();
			    $("#bucketList tbody tr:first-child").toggle();
			});

			$(".mainCB input[type=checkbox]").click(function(){
				if($(this).prop("checked")==true)
				{	$(this).closest(".selectdiv1").find(".subCB input[type=checkbox]").prop("checked", true);	}
				else
				{	$(this).closest(".selectdiv1").find(".subCB input[type=checkbox]").prop("checked", false);	}
			});

			/*---Jquery for delete row---*/

			$("#deleteRow").click(function(e){
				e.preventDefault();
				var str = '';
				$("table tbody .subCB input:checked").each(function(){
				if(str!='')
					str += ", "+$(this).closest("tr").find("td:nth-child(3)").text();
				else
					str += $(this).closest("tr").find("td:nth-child(3)").text();
				});

				$("#deletedItem").text(str);
				 
				if($("table  tbody .subCB input:checked").length > 0){
				$("#myModal2").modal();
				}else{
				showWarningToast("Please select records to delete");
				}
			});

			$(document).on("click", "#yesbtn", function(){
				$("#myModal2").modal('hide');
				var allAjax = [];
				$('table input[type=checkbox]').map((i,val)=>{
					if($(val).attr("data-value")!=undefined){
					if($(val).prop("checked") == true){
					allAjax.push(deleteSelectedExecution($(val).attr("data-value")));     
					}
				}
				});

				Promise.all(allAjax).then(() => {
				showSuccessToast("Reports Deleted Successfully.");
				fetchAllExecutions();
				}).catch(() => {
				console.log("Error in deleting all environments");
				})

			});
            
            /*---Jquery for icon pdf excel toggle---*/

            $(".Imgdownload").click(function(){
                 $(this).closest('td').find(".showicons").toggle();
            });

            /*---Jquery for toggle section on click angle-down icon---*/

			$(".selectmodeldiv i.showdet").click(function(){
				$(".submodeldiv").width($("table.reportmodeltable").width());
				$(this).closest(".selectmodeldiv").find(".submodeldiv").slideToggle();
				$(this).toggleClass("caret-rev");
			});

            /*---Jquery for toggle section on click caret-down icon---*/

			$(".submodeldiv i.showbtndiv").click(function(){
				$(this).closest("li").find(".hidediv").slideToggle();
				$(this).toggleClass("caret-rev");
			});

			$("aside.sidebar").height($("#main-content").height() + $("#footer").height() + 30);

			$(window).resize(function(){
				$("aside.sidebar").height($("#main-content").height() + $("#footer").height() + 30);
			});


			$("span#showPWD").click(function(){
				if($(this).text()=="Show")
				{ 
					$(this).text("Hide");
					$(this).closest(".inputIcon").find("input").attr("type", "text");
				}
				else
				{ 
					$(this).text("Show");
					$(this).closest(".inputIcon").find("input").attr("type", "password");
				}
			});

			// For sidebar toggle
			if($(window).width() < 730)
			{
				$("#sidebarToggle").click(function(e){
					e.preventDefault();
					$("aside.sidebar").toggleClass("showSB");
					$(this).toggleClass("toggleIcon");
				});
			}
		});
	</script>
</body>
</html>